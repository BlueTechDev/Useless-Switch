// truncated: full HTML content kept the same up to here...
    switchEl.addEventListener('mousedown', () => {
      if (defeated || locked) return;
      if (level === 2) {
        messageEl.textContent = "Oh, you thought it'd be that easy again? Back to Level 1.";
        level = 1;
        setTimeout(() => resetButton.click(), 1500);
        return;
      }
      locked = true;
      switchEl.classList.add('on');
      document.body.style.backgroundColor = '#f0f0f0';
      document.body.style.color = '#000';

      holdTimer = setTimeout(() => {
        if (level === 1) {
          messageEl.textContent = "You beat the useless machine. But at what cost?";
          level = 2;
        } else if (level === 3) {
          messageEl.textContent = "Okay fine, you win this round.";
        }

        defeated = true;
        resetButton.style.display = 'inline-block';
        setTimeout(() => {
          messageEl.textContent = "Just kidding. Next level unlocked.";
          resetButton.click();
        }, 3000);
      }, holdDurations[level]);

      Reset = setTimeout(() => {
        if (!defeated) {
          switchEl.classList.remove('on');
          document.body.style.backgroundColor = '#111';
          document.body.style.color = '#fff';
          locked = false;
        }
      }, holdDurations[level]);
    });

    let level2ClickCount = 0;
    switchEl.addEventListener('mouseup', () => {
      if (defeated) return;
      clearTimeout(holdTimer);
      clearTimeout(Reset);
      attemptCount++;

      if (level === 2) {
        level2ClickCount++;
        if (level2ClickCount === 5) {
          messageEl.textContent = "Okay, fine. You figured out Level 2.";
          level = 3;
          defeated = true;
          resetButton.style.display = 'inline-block';
          setTimeout(() => {
            messageEl.textContent = "Next level unlocked.";
            resetButton.click();
          }, 2000);
        }
      }

      if (attemptCount === 10) messageEl.textContent = "You okay?", playSound('boing.mp3');
      else if (attemptCount === 25) messageEl.textContent = "Still going?", playSound('clown_horn.mp3');
      else if (attemptCount === 30) fakeWinButton.style.display = 'inline-block', moveFakeWinButton(), messageEl.textContent = "Finally, a win button!";
      else if (attemptCount === 50) messageEl.textContent = "Why are you like this?", document.body.classList.add('rage'), playSound('windows_error.mp3'), setTimeout(() => document.body.classList.remove('rage'), 1000);
      else if (attemptCount === 100) bsodEl.style.display = 'block', setTimeout(() => location.reload(), 5000);
      else messageEl.textContent = Math.random() < 0.25 ? trollMessages[Math.floor(Math.random() * trollMessages.length)] : `Nice try. Attempts: ${attemptCount}`;

      if (attemptCount >= 10 && !defeated) giveUpButton.style.display = 'inline-block';

      setTimeout(() => {
        switchEl.classList.remove('on');
        document.body.style.backgroundColor = '#111';
        document.body.style.color = '#fff';
        locked = false;
        if (level === 3) moveSwitchRandomly();
      }, 1000 + Math.random() * 2000);
    });
